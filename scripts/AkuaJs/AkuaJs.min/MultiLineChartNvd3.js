define(["core/CoreBundle","nv.d3.min"],function(){function b(a){Apple.call(this,a);this.axis0=a.axis0;this.axis1=a.axis1;this.slicer=a.slicer;this.height=a.height?a.height:400;this.divid=guid()}b.prototype=new Apple;b.prototype.constructor=b;b.prototype.getSelection=function(){return[]};b.prototype.getView=function(){return this.view=$('<div id="'+this.divid+'">  <svg class="nvd3" id="'+this.divid+'" style="height:'+this.height+'px"></svg></div> ')};b.prototype.updateValues=function(){var a=this;
nv.addGraph(function(){var b=nv.models.lineChart();b.xAxis.tickFormat(function(b){return d3.locale(a.locale).timeFormat("%x")(new Date(b))});b.yAxis.tickFormat(d3.locale(a.locale).numberFormat(a.numberFormat));d3.select("#"+a.divid+" svg").datum(a.testdata()).transition().duration(500).call(b);return b})};b.prototype.testdata=function(){for(var a=this.barAxis=this.axis0.Tuples().ToArray(),b=this.axis1.Tuples().ToArray(),e=[],d=0;d<b.length;d++){for(var f=[],c=0;c<a.length;c++){var g=this.getValue(a[c].And(b[d]));
f.push({y:null!=g?g:0,x:parseInt(a[c].ToCaption())})}c={};c.values=f;c.key=b[d].ToCaption();c.color=this.getColorByName(b[d].ToCaption());e.push(c)}return e};b.prototype.selectionCallback=function(){var a="";this.getSelection().each(function(){a+=$(this).text()+" "});alert(a)};return function(a){return new b.prototype.constructor(a)}});
